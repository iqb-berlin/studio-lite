@if (appService.dataLoading) {
  <div class="spinner-container fx-column-start-center">
    <mat-spinner class="fx-flex-fix-100"></mat-spinner>
    @if (appService.dataLoading | dataLoadingIsNumber) {
      <button
        mat-button
        class="fx-flex-fill">
        {{appService.dataLoading | dataLoadingAsText}}
      </button>
    }
  </div>
}
@if (appService.errorMessages.length) {
  <div class="error-container fx-column-start-stretch mat-elevation-z8">
    @for (e of appService.errorMessages; track e) {
      <div class="fx-row-space-between-center fx-gap-10">
        <div class="x-flex-fill fx-row-start-center fx-gap-10"
             [matTooltip]="e.message">
          <mat-icon class="error-icon" [color]="'warn'">error_outline</mat-icon>
          <span>{{('app-http-error.' + e.status) | translate}}</span>
        </div>
        @if (e.status | isInArray: [401, 403, 410]) {
          <button mat-raised-button
                  [color]="'primary'"
                  (click)="logout_from_error()">
                {{'app-http-error.login' | translate}}
          </button>
        }
        <button mat-button
          [matTooltip]="'app-http-error.close' | translate"
          (click)="appService.removeErrorMessage(e)" >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    }
  </div>
}
<div class="header">
  <div class="logo hide-on-print">
    <a [routerLink]="['/']"
      [attr.aria-label]="'home.go-home' | translate">
      <img [src]="appService.appLogo?.data"
        [matTooltip]="'home.home-page' | translate"
        [alt]="'home.home-page' | translate"/>
    </a>
  </div>

  <div class="page-title hide-on-print fx-row-space-between-center">
    @if (!appService.appConfig.hideTitlesOnPage) {
      <div class="app-title">
        {{ appService.appConfig.appTitle }}
      </div>
    }

    <div class="fx-row-end-center fx-gap-10">
    @if (appService.appConfig.pageTitle && !appService.appConfig.hideTitlesOnPage) {
      <div>
        {{ appService.appConfig.pageTitle }}
      </div>
    }
    @if (currentRoutePath !== 'review' && currentRoutePath !== 'print') {
      @if (appService.authData.userId) {
        <button mat-button
                [class.white-color] = "currentRoutePath !== 'about'"
                [color]="'primary'"
                [routerLink]="currentRoutePath === 'about' ? ['/'] : ['/about']"
                [matTooltip]="'home.imprint' | translate"
                matTooltipPosition="above"
                data-cy="app-info">
          <studio-lite-wrapped-icon icon="info_outline"></studio-lite-wrapped-icon>
        </button>
      }
      @if (appService.authData.isAdmin) {
        <button mat-button
                [class.white-color] = "currentRoutePath !== 'admin'"
                [color]="'primary'"
                [routerLink]="currentRoutePath === 'admin' ? ['/'] : ['/admin']"
                [matTooltip]="'home.goto-admin' | translate"
                matTooltipPosition="above"
                data-cy="goto-admin">
          <studio-lite-wrapped-icon icon="construction"></studio-lite-wrapped-icon>
        </button>
      }
      @if (appService.authData.userId) {
        <studio-lite-user-menu></studio-lite-user-menu>
      }
    }
    </div>
  </div>
</div>
<router-outlet></router-outlet>
